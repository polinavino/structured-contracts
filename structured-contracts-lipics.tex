
\documentclass[a4paper,UKenglish,cleveref, autoref, thm-restate, authorcolumns]{lipics-v2021}

\usepackage[T1]{fontenc}
% T1 fonts will be used to generate the final print and online PDFs,
% so please use T1 fonts in your manuscript whenever possible.
% Other font encondings may result in incorrect characters.
%
\usepackage{graphicx}
% Used for displaying a sample figure. If possible, figure files should
% be included in EPS format.
%
% If you use the hyperref package, please uncomment the following two lines
% to display URLs in blue roman font according to Springer's eBook style:
%\usepackage{color}
%\renewcommand\UrlFont{\color{blue}\rmfamily}
% correct bad hyphenation here
\hyphenation{}

%\usepackage{natbib}
\usepackage{url}


% *** MATHS PACKAGES ***
%
\usepackage{iohk}
%\usepackage[cmex10]{amsmath}
\usepackage{amssymb}
\usepackage{stmaryrd}
%\usepackage{amsthm}

% \usepackage[margin=2.5cm]{geometry}
\usepackage{microtype}
\usepackage{mathpazo} % nice fonts
\usepackage{amsmath}
\usepackage{amssymb}
%\usepackage{amsthm}
\usepackage{latexsym}
\usepackage{mathtools}
\usepackage{stmaryrd}
\usepackage{extarrows}
\usepackage{slashed}
%\usepackage[unicode=true,pdftex,pdfa,colorlinks=true]{hyperref}
%\usepackage{xcolor}
%\usepackage[capitalise,noabbrev,nameinlink]{cleveref}
%\usepackage{float}

% *** ALIGNMENT PACKAGES ***
%
\usepackage{array}
\usepackage{float}  %% Try to improve placement of figures.  Doesn't work well with subcaption package.
\usepackage{subcaption}
\usepackage{caption}

\usepackage{subfiles}
% \usepackage{geometry}
\usepackage{listings}
 \usepackage{xcolor}
\usepackage{verbatim}
\usepackage{listings}% http://ctan.org/pkg/listings
\lstset{
  basicstyle=\ttfamily,
  mathescape
}
\usepackage{alltt}
\usepackage{paralist}

% inference rules
\usepackage{semantic}

\usepackage{todonotes}

%
\newcommand{\todochak}[1]{\todo[inline,color=purple!40,author=chak]{#1}}
\newcommand{\todompj}[1]{\todo[inline,color=yellow!40,author=Michael]{#1}}
\newcommand{\todokwxm}[1]{\todo[inline,color=blue!20,author=kwxm]{#1}}
\newcommand{\todopv}[1]{\todo[inline,color=purple!40,author=polina]{#1}}

\newcommand{\red}[1]{\textcolor{red}{#1}}
\newcommand{\redfootnote}[1]{\red{\footnote{\red{#1}}}}
\newcommand{\blue}[1]{\textcolor{blue}{#1}}
\newcommand{\bluefootnote}[1]{\blue{\footnote{\blue{#1}}}}

%% A version of ^{\prime} for use in text mode
\makeatletter
\DeclareTextCommand{\textprime}{\encodingdefault}{%
  \mbox{$\m@th'\kern-\scriptspace$}%
}
\makeatother

\newcommand{\code}{\texttt}
\renewcommand{\i}{\textit}  % Just to speed up typing: replace these in the final version
\renewcommand{\t}{\texttt}  % Just to speed up typing: replace these in the final version
\newcommand{\s}{\textsf}  % Just to speed up typing: replace these in the final version
\newcommand{\msf}[1]{\ensuremath{\mathsf{#1}}}
\newcommand{\mi}[1]{\ensuremath{\mathit{#1}}}

%% A figure with rules above and below.
\newcommand\rfskip{3pt}
%\newenvironment{ruledfigure}[1]{\begin{figure}[#1]\hrule\vspace{\rfskip}}{\vspace{\rfskip}\hrule\end{figure}}
\newenvironment{ruledfigure}[1]{\begin{figure}[#1]}{\end{figure}}

%% Various text macros
\newcommand{\true}{\type{True}}
\newcommand{\false}{\type{False}}

\newcommand{\hash}[1]{\ensuremath{#1^{\#}}}

\newcommand\mapsTo{\ensuremath{\mapsto}}
\newcommand\cL{\ensuremath{\{}}
\newcommand\cR{\ensuremath{\}}}

\newcommand{\List}[1]{\ensuremath{\s{List}[#1]}}
\newcommand{\Set}[1]{\ensuremath{\mathbb{P}~#1}}  %{\ensuremath{\s{Set}[#1]}}
\newcommand{\FinSet}[1]{\ensuremath{\s{FinSet}[#1]}}
\newcommand{\Interval}[1]{\ensuremath{\s{Interval}[#1]}}
\newcommand{\FinSup}[2]{\ensuremath{\s{FinSup}[#1,\linebreak[0]#2]}}
% ^ \linebeak is to avoid a bad line break when we talk about finite
% maps.  We may be able to remove it in the final version.
\newcommand{\supp}{\msf{supp}}

\newcommand{\Script}{\ensuremath{\s{Script}}}
\newcommand{\scriptAddr}{\fun{scriptAddr}}
\newcommand{\ctx}{\ensuremath{\s{Context}}}
\newcommand{\vlctx}{\ensuremath{\s{ValidatorContext}}}
\newcommand{\mpsctx}{\ensuremath{\s{PolicyContext}}}
\newcommand{\toData}{\ensuremath{\s{toData}}}
\newcommand{\toTxData}{\ensuremath{\s{toTxData}}}
\newcommand{\fromData}{\msf{fromData}}

\newcommand{\emptymap}{\ensuremath{\{\}}}
\newcommand{\emptytype}{\star}
\newcommand{\emptytypeT}{\{\star\}}
\newcommand{\verify}{\msf{verify}}

\newcommand{\mkContext}{\ensuremath{\s{mkContext}}}
\newcommand{\mkTxInfo}{\ensuremath{\s{mkTxInfo}}}
\newcommand{\mkVlContext}{\ensuremath{\s{mkValidatorContext}}}
\newcommand{\mkMpsContext}{\ensuremath{\s{mkPolicyContext}}}
\newcommand{\checkSig}{\ensuremath{\s{checkSig}}}

\newcommand{\applyScript}[1]{\ensuremath{\llbracket#1\rrbracket}}
\newcommand{\applyMPScript}[1]{\ensuremath{\llbracket#1\rrbracket}}

\newcommand{\unionoverrideMinus}{\ensuremath{\mathbin{\cup_{-}}}}
% wildcard parameter
\newcommand{\wcard}[0]{\underline{\phantom{a}}}

% Macros for eutxo things.
\newcommand{\tx}{\fun{tx}}
\newcommand{\TxId}{\ensuremath{\s{TxId}}}
\newcommand{\TxInfo}{\ensuremath{\s{TxInfo}}}
\newcommand{\txId}{\msf{txId}}
\newcommand{\txrefid}{\fun{id}}
\newcommand{\Address}{\ensuremath{\s{Address}}}
\newcommand{\DataHash}{\ensuremath{\s{DataHash}}}
\newcommand{\hashData}{\fun{dataHash}}
\newcommand{\idx}{\fun{index}}
\newcommand{\inputs}{\fun{inputs}}
\newcommand{\outputs}{\fun{outputs}}
\newcommand{\Out}{\type{Output}}
\newcommand{\validityInterval}{\fun{validityInterval}}
\newcommand{\scripts}{\fun{scripts}}
\newcommand{\mint}{\fun{mint}}
\newcommand{\mintScripts}{\fun{mintScripts}}
\newcommand{\mintScsRdmrs}{\fun{mintScsRdmrs}}
\newcommand{\mintRdmrs}{\fun{mintRdmrs}}
\newcommand{\sigs}{\fun{sigs}}
\newcommand{\fee}{\fun{fee}}
\newcommand{\addr}{\fun{addr}}
\newcommand{\pubkey}{\fun{pubkey}}
\newcommand{\val}{\fun{value}}  %% \value is already defined
\newcommand{\Value}{\type{Value}}
\newcommand{\Redeemer}{\type{Redeemer}}
\newcommand{\TxOutRef}{\type{TxIn}}
\newcommand{\TxOut}{\type{TxOut}}
\newcommand{\ScriptContext}{\type{ScriptContext}}
\newcommand{\ScriptPurpose}{\type{ScriptPurpose}}
\newcommand{\Datum}{\type{Datum}}
\newcommand{\DCert}{\type{DCert}}
\newcommand{\LCTx}{\type{LCTx}}
\newcommand{\TxInInfo}{\type{TxInInfo}}

\newcommand{\FState}{\type{FState}}
\newcommand{\FInput}{\type{FInput}}
\newcommand{\Send}{\type{Send}}
\newcommand{\Receive}{\type{Receive}}
\newcommand{\SimplInput}{\type{SimplInput}}
\newcommand{\AccMsgs}{\type{AccMsgs}}
\newcommand{\Context}{\type{Context}}

\newcommand{\validator}{\fun{validator}}
\newcommand{\redeemer}{\fun{redeemer}}
\newcommand{\datum}{\fun{datum}}
\newcommand{\datumHash}{\fun{datumHash}}
\newcommand{\datumWits}{\fun{datumWitnesses}}
\newcommand{\Data}{\ensuremath{\s{Data}}}
\newcommand{\Input}{\ensuremath{\s{Input}}}
\newcommand{\Output}{\type{Output}}
\newcommand{\OutputRef}{\fun{OutputRef}}
\newcommand{\Signature}{\ensuremath{\s{Signature}}}
\newcommand{\Ledger}{\ensuremath{\s{Ledger}}}

\newcommand{\outputref}{\fun{outputRef}}
\newcommand{\outputrefs}{\fun{outputRefs}}
\newcommand{\txin}{\fun{in}}
\newcommand{\id}{\fun{id}}
\newcommand{\lookupTx}{\msf{lookupTx}}
\newcommand{\getSpent}{\msf{getSpentOutput}}

% \newcommand{\Tick}{\ensuremath{\s{Tick}}}
\newcommand{\Tick}{\type{Slot}}
\newcommand{\currentTick}{\msf{currentTick}}
\newcommand{\spent}{\msf{spentOutputs}}
\newcommand{\unspent}{\msf{unspentOutputs}}
\newcommand{\txunspent}{\msf{unspentTxOutputs}}
\newcommand{\eutxotx}{\msf{Tx}}


\newcommand{\consumes}[1]{\msf{consumes(#1)}}
\newcommand{\consumesOne}[1]{\msf{consumesOne(#1)}}
\newcommand{\cid}{\fun{cid}}
\newcommand{\inputValue}{\fun{inputValue}}
\newcommand{\rMin}{r_{\fun{min}}}
\newcommand{\rMax}{r_{\fun{max}}}

\newcommand{\utxotx}{\msf{Tx}}

\newcommand{\Quantity}{\ensuremath{\s{Quantity}}}
\newcommand{\Asset}{\ensuremath{\s{Asset}}}
\newcommand{\Policy}{\ensuremath{\s{PolicyID}}}
\newcommand{\Quantities}{\ensuremath{\s{Quantities}}}
\newcommand{\nativeCur}{\ensuremath{\mathrm{nativeC}}}
\newcommand{\nativeTok}{\ensuremath{\mathrm{nativeT}}}
\newcommand{\valC}{\mkValidator{\mathcal{C}}}
\newcommand{\polC}{\mkPolicy{\mathcal{C}}}
\newcommand\mkValidator[1]{\msf{validator}_#1}
\newcommand\mkPolicy[1]{\msf{policy}_#1}

\newcommand{\PublicKey}{\ensuremath{\s{PubKey}}}
\newcommand{\PubKey}{\ensuremath{\s{PubKey}}}
\newcommand{\PrivateKey}{\ensuremath{\s{PrivateKey}}}

\newcommand{\pkey}{\ensuremath{\pi_{\mathsf{p}}}}
\newcommand{\skey}{\ensuremath{\pi_{\mathsf{s}}}}

\newcommand\B{\ensuremath{\mathbb{B}}}
\newcommand\N{\ensuremath{\mathbb{N}}}
\newcommand\Z{\ensuremath{\mathbb{Z}}}
\renewcommand\H{\ensuremath{\mathbb{H}}}
%% \H is usually the Hungarian double acute accent
\newcommand{\emptyBs}{\ensuremath{\emptyset}}
\newcommand{\leteq}{\ensuremath{\mathrel{\mathop:}=}}
\newcommand{\Nt}{\ensuremath{\Diamond}}
\newcommand{\Bool}{\type{Bool}}
\newcommand{\Type}{\type{Type}}
\newcommand{\STRUC}{\type{STRUC}}
\newcommand{\BASIC}{\type{BASIC}}
\newcommand{\LEDGER}{\type{LEDGER}}
\newcommand{\LChanges}{\type{LChanges}}
\newcommand{\LVal}{\type{LVal}}
\newcommand{\Sb}{\mathbb{S}}

%ledger spec commands
\newcommand{\Request}{\type{Request}}
\newcommand{\LS}{\mathcal{L}\mathcal{S}}
\newcommand{\State}{\type{State}}
\newcommand{\CEMState}{\type{CEMState}}
% \newcommand{\AccID}{\type{AccID}}
\newcommand{\PCMT}{\type{PCMT}}
\newcommand{\Accts}{\type{Accts}}
% \newcommand{\Open}{\type{Open}}
% \newcommand{\OArgs}{\type{OArgs}}
% \newcommand{\Close}{\type{Close}}
% \newcommand{\CArgs}{\type{CArgs}}
% \newcommand{\Deposit}{\type{Deposit}}
% \newcommand{\DArgs}{\type{DArgs}}
\newcommand{\AMState}{\type{AMState}}
% \newcommand{\Withdraw}{\type{Withdraw}}
% \newcommand{\WArgs}{\type{WArgs}}
% \newcommand{\Transfer}{\type{Transfer}}
\newcommand{\TransferFrom}{\type{TransferFrom}}
\newcommand{\TransferTo}{\type{TransferTo}}
% \newcommand{\TArgs}{\type{TArgs}}
\newcommand{\TTArgs}{\type{TTArgs}}
\newcommand{\TFArgs}{\type{TFArgs}}
\newcommand{\CEMInput}{\type{CEMInput}}
\newcommand{\Tx}{\type{Tx}}
\newcommand{\ID}{\type{ID}}
\newcommand{\Th}{\mathcal{T}}
\newcommand{\Tu}{\mathcal{U}}
\newcommand{\T}{\type{T}}
\newcommand{\Err}{\type{Err}}
\newcommand{\ups}{\fun{update}}
\newcommand{\FHBMT}{\type{FHBMT}}
\newcommand{\UTxO}{\type{UTxO}}
\newcommand{\UTxOState}{\type{UTxOState}}
\newcommand{\TxIn}{\type{TxIn}}
\newcommand{\MsgIn}{\type{MsgIn}}

\newcommand{\CEMInit}{\type{CEMInit}}
\newcommand{\CEMStep}{\type{CEMStep}}

\newcommand{\CEMInputs}{\type{CEMInputs}}
\newcommand{\CEMStates}{\type{CEMStates}}

\newcommand{\PlutusVII}{\type{PlutusV2}}
\newcommand{\Credential}{\type{Credential}}
\newcommand{\Block}{\type{Block}}

\newcommand{\StateMachineState}{\type{StateMachineState}}
\newcommand{\StateMachineInput}{\type{StateMachineInput}}
\newcommand{\NFTSMState}{\type{NFTSMState}}
\newcommand{\NFTSMInput}{\type{NFTSMInput}}

\newcommand{\True}{\type{True}}
\newcommand{\False}{\type{False}}

\newcommand{\Ix}{\type{Ix}}
\newcommand{\Slot}{\type{Slot}}
\newcommand{\PParams}{\type{PParams}}
\newcommand{\Coin}{\type{Coin}}
\newcommand{\LState}{\type{LState}}
\newcommand{\Initialize}{\type{Initialize}}
\newcommand{\Progress}{\type{Progress}}

\newcommand{\OutputVal}{\type{OutputVal}}

\newcommand{\AssetID}{\type{AssetID}}
\newcommand{\TokenName}{\type{TokenName}}
\newcommand{\myThread}{\type{myThread}}
\newcommand{\pkSigns}{\type{pkSigns}}

\newcommand{\Counters}{\type{Counters}}
\newcommand{\CounterID}{\type{CounterID}}
\newcommand{\CS}{\type{CS}}
\newcommand{\CI}{\type{CI}}

\newcommand{\Env}{\type{Env}}
\newcommand{\FEnv}{\type{FEnv}}
\newcommand{\Id}{\type{Id}}

\usepackage{etoolbox}
\usepackage{tikz-qtree}
\usepackage{tikz}
\usetikzlibrary{matrix}

% For anonymisation
\newtoggle{anonymous}
\toggletrue{anonymous}
\iftoggle{anonymous}{
  \newcommand{\Cardano}{CHAIN}
  \newcommand{\Plutus}{LANG}
}{
  \newcommand{\Cardano}{Cardano}
  \newcommand{\Plutus}{Plutus Core}
}

% Names, for consistency
\newcommand{\UTXO}{UTxO}
\newcommand{\EUTXO}{E\UTXO{}}
\newcommand{\ExUTXO}{Extended \UTXO{}}

\newcommand{\SELF}{\type{SELF}}
\newcommand{\TRANS}{\type{TRANS}}
\newcommand{\POV}{\type{POV}}
\newcommand{\CEM}{\type{CEM}}
\newcommand{\Trc}{\type{Trc}}
\newcommand{\CEMS}{\type{CEMS}}
\newcommand{\SMUP}{\type{SMUP}}
\newcommand{\CEMsm}{CEM_{sm}}

\newcommand{\SR}{\type{SR}}
\newcommand{\MsgRdmr}{\type{MsgRdmr}}
\newcommand{\send}{\type{send}}
\newcommand{\receive}{\type{receive}}
\newcommand{\MSGS}{\type{MSGS}}
\newcommand{\Msg}{\type{Msg}}
\newcommand{\msgsTT}{\type{msgsTT}}
\newcommand{\msgsVal}{\type{msgsVal}}
\newcommand{\msgTkn}{\type{msgTkn}}

\newcommand{\Memory}{\type{Memory}}
\newcommand{\Params}{\type{Params}}
\newcommand{\HState}{\type{HState}}
\newcommand{\SType}{\type{SType}}
\newcommand{\HYDRA}{\type{HYDRA}}

\newcommand{\TOGGLE}{\type{TOGGLE}}
\newcommand{\Toggle}{\type{Toggle}}
\newcommand{\toggle}{\type{toggle}}
\newcommand{\Payout}{\type{Payout}}
\newcommand{\payout}{\type{payout}}
\newcommand{\myPKs}{\type{myPKs}}
\newcommand{\toggleTT}{\type{toggleTT}}
\newcommand{\toggleVal}{\type{toggleVal}}
\newcommand{\PartialOutput}{\type{PartialOutput}}

\newcommand{\UTXOma}{\UTXO$_{\textrm{ma}}$}
\newcommand{\EUTXOma}{\EUTXO$_{\textrm{ma}}$}

\newcommand\initial{\msf{initial}}
\newcommand\nft{\blacklozenge}
\newcommand\step{\msf{step}}
\newcommand\satisfies{\msf{satisfies}}
\newcommand\checkOutputs{\msf{checkOutputs}}
\newcommand\txeq{tx^\equiv}

% Account simulations
\newcommand{\threadTT}{\type{threadTT}}
\newcommand{\AccID}{\type{AccID}}
\newcommand{\AccData}{\type{AccData}}
\newcommand{\Accnts}{\type{Accnts}}
\newcommand{\OneUpd}{\type{OneUpd}}
\newcommand{\AccUpd}{\type{AccUpd}}
\newcommand{\Open}{\type{Open}}
\newcommand{\Oargs}{\type{Oargs}}
\newcommand{\Close}{\type{Close}}
\newcommand{\CArgs}{\type{CArgs}}
\newcommand{\Deposit}{\type{Deposit}}
\newcommand{\DArgs}{\type{DArgs}}
\newcommand{\Withdraw}{\type{Withdraw}}
\newcommand{\WArgs}{\type{WArgs}}
\newcommand{\Transfer}{\type{Transfer}}
\newcommand{\TArgs}{\type{TArgs}}
\newcommand{\ACCNTS}{\type{ACCNTS}}
\newcommand{\ACCOP}{\type{ACCOP}}
\newcommand{\NFT}{\type{NFT}}

\newcommand{\PayIns}{\type{PayIns}}
\newcommand{\PayOuts}{\type{PayOuts}}
\newcommand{\Bag}{\type{Bag}}
\newcommand{\Rate}{\type{Rate}}
\newcommand{\OMap}{\type{OMap}}
\newcommand{\XOR}{\type{XOR}}

% relaxed float placement
\renewcommand{\topfraction}{.95}
\renewcommand{\bottomfraction}{.7}
\renewcommand{\textfraction}{.15}
\renewcommand{\floatpagefraction}{.66}
\renewcommand{\dbltopfraction}{.66}
\renewcommand{\dblfloatpagefraction}{.66}
\setcounter{topnumber}{9}
\setcounter{bottomnumber}{9}
\setcounter{totalnumber}{20}
\setcounter{dbltopnumber}{9}

\newcommand\CStep[1]{\ensuremath{
 #1 \xrightarrow{\hspace{5pt} i \hspace{5pt}} (#1' , \txeq)
%%\textsf{step}\, #1\, i \equiv \textsf{just}\, #1'
}}

\newcommand{\pp}{\nolinebreak\hspace{+0.3em}{\tiny\bf +}\nolinebreak\hspace{-.10em}{\tiny\bf +}\nolinebreak\hspace{+0.3em}\nolinebreak}



%This is a template for producing LIPIcs articles.
%See lipics-v2021-authors-guidelines.pdf for further information.
%for A4 paper format use option "a4paper", for US-letter use option "letterpaper"
%for british hyphenation rules use option "UKenglish", for american hyphenation rules use option "USenglish"
%for section-numbered lemmas etc., use "numberwithinsect"
%for enabling cleveref support, use "cleveref"
%for enabling autoref support, use "autoref"
%for anonymousing the authors (e.g. for double-blind review), add "anonymous"
%for enabling thm-restate support, use "thm-restate"
%for enabling a two-column layout for the author/affilation part (only applicable for > 6 authors), use "authorcolumns"
%for producing a PDF according the PDF/A standard, add "pdfa"

%\pdfoutput=1 %uncomment to ensure pdflatex processing (mandatatory e.g. to submit to arXiv)
%\hideLIPIcs  %uncomment to remove references to LIPIcs series (logo, DOI, ...), e.g. when preparing a pre-final version to be uploaded to arXiv or another public repository

%\graphicspath{{./graphics/}}%helpful if your graphic files are in another directory

\bibliographystyle{plainurl}% the mandatory bibstyle

\title{{Structured Contracts in the EUTxO Ledger Model}
\thanks{This work was supported by Input Output (iohk.io) through their funding of the Edinburgh Blockchain Technology Lab.}} %TODO Please add

%\titlerunning{Dummy short title} %TODO optional, please use if title is longer than one line

\author{Polina Vinogradova}{IOG, Singapore}{polina.vinogradova@iohk.io}{https://orcid.org/0000-0002-1825-0097}{}
\author{Manuel Chakravarty}{IOG, Singapore}{manuel.chakravarty@iohk.io}{https://orcid.org/0000-0002-1825-0097}{}
\author{Philip Wadler}{IOG, Singapore \and University of Edinburgh, UK}{philip.wadler@iohk.io}{https://orcid.org/0000-0002-1825-0097}{}
\author{James	Chapman}{IOG, Singapore}{james.chapman@iohk.io}{https://orcid.org/0000-0002-1825-0097}{}
\author{Tudor	Ferariu}{University of Edinburgh, UK}{s1408714@sms.ed.ac.uk}{https://orcid.org/0000-0002-1825-0097}{}
\author{Michael Peyton Jones}{IOG, Singapore}{michael.peyton-jones@iohk.io}{https://orcid.org/0000-0002-1825-0097}{}
\author{Jacco	Krijnen}{Utrecht University, Netherlands}{j.o.g.krijnen@uu.nl}{https://orcid.org/0000-0002-1825-0097}{}
\author{Orestis	Melkonian}{IOG, Singapore \and University of Edinburgh, UK}{orestis.melkonian@ed.ac.uk}{https://orcid.org/0000-0002-1825-0097}{}

%TODO mandatory, please use full name; only 1 author per \author macro; first two parameters are mandatory, other parameters can be empty. Please provide at least the name of the affiliation and the country. The full address is optional. Use additional curly braces to indicate the correct name splitting when the last name consists of multiple name parts.
% \author{Jane {Open Access}}{Dummy University Computing Laboratory, [optional: Address], Country \and My second affiliation, Country \and \url{http://www.myhomepage.edu} }{johnqpublic@dummyuni.org}{https://orcid.org/0000-0002-1825-0097}{This work was supported
% by Input Output (iohk.io) through their funding of the Edinburgh Blockchain Technology Lab.}%TODO mandatory,

% \author{Joan R. Public\footnote{Optional footnote, e.g. to mark corresponding author}}{Department of Informatics, Dummy College, [optional: Address], Country}{joanrpublic@dummycollege.org}{[orcid]}{[funding]}

% \author{Polina  Vinogradova\inst{1}\orcidID{0000-1111-2222-3333} \and
% Manuel Chakravarty\inst{1}\orcidID{0000-1111-2222-3333} \and %}{IOG} {manuel.chakravarty@iohk.io}{}{}
% Philip Wadler\inst{1,2}\orcidID{0000-1111-2222-3333} \and
% James	Chapman\inst{1}\orcidID{0000-1111-2222-3333} \and %}{IOG} {james.chapman@iohk.io}{}{}
% Tudor	Ferariu\inst{1,2}\orcidID{0000-1111-2222-3333} \and %}{University of Edinburgh, UK} {s1408714@sms.ed.ac.uk}{}{}
% Michael Peyton Jones\inst{1}\orcidID{0000-1111-2222-3333} \and %}{IOG} {michael.peyton-jones@iohk.io}{}{}
% Jacco	Krijnen\inst{1,3}\orcidID{0000-1111-2222-3333} \and %}{Utrecht University, Netherlands} {j.o.g.krijnen@uu.nl}{}{}
% Orestis	Melkonian\inst{1,2}\orcidID{0000-1111-2222-3333} } %}{IOG \& University of Edinburgh, UK} {orestis.melkonian@ed.ac.uk}{}{}


\authorrunning{P. Vinogradova et al.} %TODO mandatory. First: Use abbreviated first/middle names. Second (only in severe cases): Use first author plus 'et al.'

\Copyright{Polina Vinogradova et al.} %TODO mandatory, please use full first names. LIPIcs license is "CC-BY";  http://creativecommons.org/licenses/by/3.0/

\ccsdesc[100]{Security and privacy~Formal methods and theory of security} %TODO mandatory: Please choose ACM 2012 classifications from https://dl.acm.org/ccs/ccs_flat.cfm

\keywords{blockchain, ledger, smart contract, formal verification,
specification, transition system, UTxO, semantics} %TODO mandatory; please add comma-separated list of keywords

\category{} %optional, e.g. invited paper

\relatedversion{} %optional, e.g. full version hosted on arXiv, HAL, or other respository/website
%\relatedversiondetails[linktext={opt. text shown instead of the URL}, cite=DBLP:books/mk/GrayR93]{Classification (e.g. Full Version, Extended Version, Previous Version}{URL to related version} %linktext and cite are optional

%\supplement{}%optional, e.g. related research data, source code, ... hosted on a repository like zenodo, figshare, GitHub, ...
%\supplementdetails[linktext={opt. text shown instead of the URL}, cite=DBLP:books/mk/GrayR93, subcategory={Description, Subcategory}, swhid={Software Heritage Identifier}]{General Classification (e.g. Software, Dataset, Model, ...)}{URL to related version} %linktext, cite, and subcategory are optional

%\funding{(Optional) general funding statement \dots}%optional, to capture a funding statement, which applies to all authors. Please enter author specific funding statements as fifth argument of the \author macro.

% \acknowledgements{I want to thank \dots}%optional

%\nolinenumbers %uncomment to disable line numbering



%Editor-only macros:: begin (do not touch as author)%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\EventEditors{John Q. Open and Joan R. Access}
\EventNoEds{2}
\EventLongTitle{42nd Conference on Very Important Topics (CVIT 2016)}
\EventShortTitle{CVIT 2016}
\EventAcronym{CVIT}
\EventYear{2016}
\EventDate{December 24--27, 2016}
\EventLocation{Little Whinging, United Kingdom}
\EventLogo{}
\SeriesVolume{42}
\ArticleNo{23}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

\maketitle

%TODO mandatory: add short abstract of the document
\begin{abstract}
  The extended UTxO ledger is a kind of a UTxO-based cryptocurrency ledger that
  supports the use of smart contract scripts to specify permissions for performing
  certain actions, such as spending a UTxO or minting assets. There have been
  some attempts to standardize the implementation of stateful programs using this
  infrastructure, with varying degrees of success. In this work, we present a model of
  stateful computation on the ledger, which we call the structured
  contract framework.

  Using a small-step semantics approach to program specification, the structured
  contracts framework establishes a simulation relation between the ledger
  state transition system and the transition system of the program being specified.
  This gives users the tools for demonstrating the correctness of a transition
  system's ledger implementation.
  We argue that the framework is versatile and amenable to formal verification
  by presenting several distinctive examples. In particular, we demonstrate how the framework allows
  for building multiple implementations of the same specification (some of which may be distributed
  across the UTxO set), as well
  as expressing the policy of an NFT as a stateful contract with a specific invariant.
\end{abstract}

\input{intro.tex}
\input{model.tex}
\input{structured.tex}
\input{toggle.tex}
% \input{properties.tex}
% \clearpage
\input{discussion.tex}
\appendix
\input{appendix.tex}


%%
%% Bibliography
%%

%% Please use bibtex,

\bibliography{structured-contracts-bib}

\appendix


\end{document}
